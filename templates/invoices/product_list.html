{% extends 'base.html' %}

{% block title %}Product Management - Invoice App{% endblock %}

{% block content %}
<h2>Product Inventory Management</h2>

<div style="margin: 20px 0;">
    {% if user.is_staff %}
        <a href="{% url 'invoices:create_product' %}" class="btn">Add New Product</a>
    {% endif %}
    <a href="{% url 'invoices:home' %}" class="btn btn-secondary">Back to Home</a>
</div>

{% if products %}
    <table>
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Unit of Measure</th>
                <th>Unit Price</th>
                <th>Stock Quantity</th>
                <th>Status</th>
                <th>Last Updated</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
                <tr>
                    <td><strong>{{ product.item_name }}</strong></td>
                    <td>{{ product.unit_of_measure }}</td>
                    <td>₹{{ product.unit_price }}</td>
                    <td>{{ product.quantity_in_stock }}</td>
                    <td>
                        {% if product.is_active %}
                            <span style="color: #080;">✓ Active</span>
                        {% else %}
                            <span style="color: #999;">✗ Inactive</span>
                        {% endif %}
                    </td>
                    <td>{{ product.updated_at|date:"M d, Y" }}</td>
                    <td>
                        {% if user.is_staff %}
                            <a href="{% url 'invoices:edit_product' product.id %}" class="btn btn-secondary" style="font-size: 12px; padding: 5px 10px;">Edit</a>
                            <a href="{% url 'invoices:delete_product' product.id %}" class="btn" style="font-size: 12px; padding: 5px 10px; background-color: #d00;">Delete</a>
                        {% else %}
                            <span style="font-size: 12px; color: #999;">View Only</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div style="text-align: center; margin: 50px 0;">
        <p>No products in inventory yet.</p>
        <a href="{% url 'invoices:create_product' %}" class="btn">Add Your First Product</a>
    </div>
{% endif %}

<div style="margin-top: 30px; padding: 15px; border: 1px solid #ccc; background-color: #f9f9f9;">
    <h3>Quick Stats</h3>
    <p><strong>Total Products:</strong> {{ total_count }}</p>
    <p><strong>Active Products:</strong> {{ active_count }}</p>
</div>
{% endblock %}
